#!/usr/bin/env bash

### Functions
function link-dotfile {
  if [[ "$1" == "oh-my-zsh.sh" ]]; then
    echo "Linking '$DEST/.oh-my-zsh/$1'"
    ln ./setup/$1 $DEST/.oh-my-zsh/$1
  else
    echo "Linking '$DEST/$1'"
    ln ./setup/$1 $DEST/$1
  fi

  echo -e
}
###

echo "Installing into diff-so-fancy for 'git di' command"
brew install diff-so-fancy

echo "Installing tmux"
brew install tmux

echo "Install utilities"
brew install htop


if [[ -z "$1" ]]; then
  echo "You should pass destiation direcory!"
  exit
else
  DEST=$1
fi

echo "Installing into '$DEST'"
echo -e

for file in `ls -A ./setup`
do
  if [[ -a $DEST/$file  ]]; then
    echo "File '$DEST/$file' exsists, migrating to '$DEST/$file.old'"
    mv $DEST/$file $DEST/$file.old
  fi

  link-dotfile $file
done
